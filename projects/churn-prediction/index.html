<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Naira Volatility Prediction</title>
  <link rel="stylesheet" href="../../styles.css" />
  <style>.demo{max-width:760px;margin:1rem auto;padding:1rem;background:linear-gradient(#021018,#031622);border-radius:8px}</style>
</head>
<body>
  <header class="site-header"><div class="container header-inner"><a href="../../index.html">← Back</a><h1 class="brand">Naira Volatility Prediction</h1></div></header>
  <main class="container">
    <section class="demo">
      <p>Adjust a monthly return (%) to see the model's probability that the Naira will experience a high-volatility month.</p>
      <p><img src="screenshot.svg" alt="Volatility screenshot" style="max-width:100%;border-radius:8px;border:1px solid rgba(255,255,255,0.03)"></p>
      <label>Monthly return (%): <input id="mins" type="range" min="-20" max="20" value="2" step="0.1"></label>
      <div style="margin-top:.5rem">Predicted high-volatility probability: <strong id="prob">—</strong></div>
    </section>

    <section class="about">
      <h4>Links & Source</h4>
      <ul>
        <li><a href="data/volatility_sample.csv" download>Download returns data (CSV)</a></li>
        <li><a href="https://github.com/Zeyi56/Joshua-Omozeyi-Sule/blob/main/api/app.py" target="_blank">Model API (server code)</a></li>
        <li><a href="https://github.com/Zeyi56/Joshua-Omozeyi-Sule/tree/main/projects/churn-prediction" target="_blank">View project source on GitHub</a></li>
        <li>Power BI dashboard (live): <a href="https://app.powerbi.com/view?r=REPLACE_WITH_YOUR_REPORT" target="_blank">https://app.powerbi.com/...</a></li>
      </ul>
      <h4>Model</h4>
      <p>The live prediction endpoint is implemented in the repository. For production, train and validate a model on historical returns, volatility, and macro features; deploy to a managed endpoint and update the API URL above.</p>
    </section>
    <section class="about">
      <h4>Model</h4>
      <p>Simple logistic function used to demonstrate model output. Replace with a real model endpoint for production.</p>
    </section>
  </main>
  <script>
    const minsEl = document.getElementById('mins');
    const probEl = document.getElementById('prob');
    async function update(){
      const ret = Number(minsEl.value);
      // Attempt live API (configure deployment URL in Links & Source above)
      try{
        const API_URL = 'http://127.0.0.1:5000/predict?ret=' + encodeURIComponent(ret);
        const res = await fetch(API_URL);
        if(res.ok){
          const json = await res.json();
          probEl.textContent = (Number(json.prob)*100).toFixed(1) + '%';
          return;
        }
      }catch(e){
        // If live API is not available, compute a heuristic prediction client-side
      }
      function sigmoid(x){return 1/(1+Math.exp(-x));}
      const score = -1.0 + 0.25 * Math.abs(ret);
      const p = sigmoid(score);
      probEl.textContent = (p*100).toFixed(1) + '%';
    }
    minsEl.addEventListener('input', update); update();
  </script>
</body>
</html>
