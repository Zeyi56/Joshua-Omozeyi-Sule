<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Churn Prediction — Demo</title>
  <link rel="stylesheet" href="../../styles.css" />
  <style>.demo{max-width:760px;margin:1rem auto;padding:1rem;background:linear-gradient(#021018,#031622);border-radius:8px}</style>
</head>
<body>
  <header class="site-header"><div class="container header-inner"><a href="../../index.html">← Back</a><h1 class="brand">Churn Prediction (Demo)</h1></div></header>
  <main class="container">
    <section class="demo">
      <p>This demo lets you tweak a customer's usage to see churn probability from a toy logistic model. The prediction is provided by a small API.</p>
      <p><img src="screenshot.svg" alt="Churn model screenshot" style="max-width:100%;border-radius:8px;border:1px solid rgba(255,255,255,0.03)"></p>
      <label>Monthly minutes: <input id="mins" type="range" min="50" max="600" value="240"></label>
      <div style="margin-top:.5rem">Predicted churn probability: <strong id="prob">—</strong></div>
    </section>
    <section class="about">
      <h4>Model</h4>
      <p>Simple logistic function used to demonstrate model output. Replace with a real model endpoint for production.</p>
    </section>
  </main>
  <script>
    const minsEl = document.getElementById('mins');
    const probEl = document.getElementById('prob');
    async function update(){
      const mins = Number(minsEl.value);
      // Try remote API, fall back to local toy model if unavailable
      try{
        const res = await fetch('http://127.0.0.1:5000/predict?mins='+encodeURIComponent(mins));
        if(!res.ok) throw new Error('bad');
        const json = await res.json();
        probEl.textContent = (Number(json.prob)*100).toFixed(1) + '%';
        return;
      }catch(e){
        // fallback local prediction
        const intercept = -1.2;
        const coef = -0.005;
        function sigmoid(x){return 1/(1+Math.exp(-x));}
        const p = sigmoid(intercept + coef*mins);
        probEl.textContent = (p*100).toFixed(1) + '% (local)';
      }
    }
    minsEl.addEventListener('input', update); update();
  </script>
</body>
</html>
